import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import org.jdom2.Attribute;
import org.jdom2.Element;
import org.jdom2.JDOMException;
import org.jdom2.input.SAXBuilder;
import org.w3c.dom.Document;
import org.xml.sax.Attributes;


public class JDOMTest {

	private  static List<Book> book_ywq=new ArrayList<Book>();
	public static void main(String[] args) throws JDOMException, IOException {
		// TODO Auto-generated method stub

		
		SAXBuilder saxBuilder=new SAXBuilder();
		InputStream in=new FileInputStream("C:\\Users\\Administrator\\Desktop\\test_xml");
		InputStreamReader isr=new InputStreamReader(in,"UTF-8");
		org.jdom2.Document document=saxBuilder.build(isr);
		Element rootElement=document.getRootElement();
		List<Element> bookList=rootElement.getChildren();
	
		for(Element book:bookList)
		{
			Book bookEntity=new Book();
			System.out.println("开始解析第"+(bookList.indexOf(book)+1)+"本书"); 
		//解析book属性
			List<Attribute> attrs =book.getAttributes();
			for(Attribute attr:attrs)
			{
				String attrname=attr.getName();
				String attrvalue=attr.getValue();
				System.out.println("属性名："+attrname+"属性值:"+attrvalue);
				if(attrname.equals("id"))
				{
					bookEntity.setId(attrvalue);
				}
			
			}
			List<Element> bookChilds=book.getChildren();
			for(Element books:bookChilds)
			{
				System.out.println("节点名:"+books.getName()+"属性值："+books.getValue());
				if(books.getName().equals("name"))
				{
					bookEntity.setName(books.getValue());
				}
				else if(books.getName().equals("author"))
				{
					bookEntity.setAuthor(books.getValue()); 
				}
				else if(books.getName().equals("year"))
				{
					bookEntity.setYear(books.getValue());
				}
				else if(books.getName().equals("language"))
				{
					bookEntity.setLanguage(books.getValue());
				}
			}
			
			System.out.println("结束解析第"+(bookList.indexOf(book)+1)+"本书"); 
			book_ywq.add(bookEntity);
			bookEntity=null;
			System.out.println("长度:"+book_ywq.size());
			//System.out.println("ID"+book_ywq.get(0).getId());
			//System.out.println("ID"+book_ywq.get(1).getId());
		}
		
	
		
	
	}

}
